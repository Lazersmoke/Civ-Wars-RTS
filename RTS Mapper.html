<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="mainstyle.css">
<script>
var selected=[0,0]
//parsecs=[Owner,current:[small craft,frigates,cruisers,battleships],commerce,commerce spread:0=full income 1=full production,production focus:0 1 2 or 3,progress on:[small craft,frigates,cruisers,battleships],production,income,upkeep]
var gameBoard=[[],[],[],[],[]]

function changeWidth(amount){
amount=Math.floor(amount)
for(var x=0;x<amount;x++){
for(var y=0;y<gameBoard.length;y++){
gameBoard[y].push([0,[0,0,0,0],0,0.5,0,[0,0,0,0],0,0,0])
}
}
//workspace.width+=amount*100
Draw();
}
function changeHeight(amount){
amount=Math.floor(amount)
var addition=[]
for(var x=0;x<gameBoard[0].length;x++){
addition.push([0,[0,0,0,0],0,0.5,0,[0,0,0,0],0,0,0])
}
for(var x=0;x<amount;x++){
gameBoard.push(addition)
}
workspace.height+=amount*100
Draw();
}
function Clicky(e){
var clix=e.clientX-9
var cliy=e.clientY-9
selected[0]=Math.floor(clix/100)
selected[1]=Math.floor(cliy/100)
document.getElementById('selectedOwner').value=gameBoard[selected[0]][selected[1]][0]
document.getElementById('selectedSmallCraft').value=gameBoard[selected[0]][selected[1]][1][0]
document.getElementById('selectedFrigates').value=gameBoard[selected[0]][selected[1]][1][1]
document.getElementById('selectedCruisers').value=gameBoard[selected[0]][selected[1]][1][2]
document.getElementById('selectedBattleships').value=gameBoard[selected[0]][selected[1]][1][3]
document.getElementById('selectedCommerce').value=gameBoard[selected[0]][selected[1]][2]
document.getElementById('selectedSpreadOutput').value=gameBoard[selected[0]][selected[1]][3]
document.getElementById('selectedSpreadSlider').value=gameBoard[selected[0]][selected[1]][3]
document.getElementById('selectedProductionFocus').value=gameBoard[selected[0]][selected[1]][4]
document.getElementById('selectedProgressSmallCraft').value=gameBoard[selected[0]][selected[1]][5][0]
document.getElementById('selectedProgressFrigates').value=gameBoard[selected[0]][selected[1]][5][1]
document.getElementById('selectedProgressCruisers').value=gameBoard[selected[0]][selected[1]][5][2]
document.getElementById('selectedProgressBattleships').value=gameBoard[selected[0]][selected[1]][5][3]
document.getElementById('selectedProduction').value=gameBoard[selected[0]][selected[1]][6]
document.getElementById('selectedIncome').value=gameBoard[selected[0]][selected[1]][7]
document.getElementById('selectedUpkeep').value=gameBoard[selected[0]][selected[1]][8]
}
function Draw(){
workspace.width=workspace.width
for(var x=0;x<workspace.width/100;x++){
for(var y=0;y<workspace.height/100;y++){

var coord=[(x*100),(y*100),((x+1)*100),((y+1)*100)]

//if its blue
if(gameBoard[x][y][0]==1){

//make space blue
ctx.fillStyle="#00007F"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])

//and put a blue numbers for current strength
ctx.font="30px Georgia"
ctx.fillStyle="#0000FF"
ctx.fillText(String(gameBoard[x][y][1][0]),coord[0],coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][1]),coord[0]+25,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][2]),coord[0]+50,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][3]),coord[0]+75,coord[1]+20)
}
//if its red
else if(gameBoard[x][y][0]==2){

//make space red
ctx.fillStyle="#7F0000"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])

//and put a red numbers for current strength
ctx.font="30px Georgia"
ctx.fillStyle="#FF0000"
ctx.fillText(String(gameBoard[x][y][1][0]),coord[0],coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][1]),coord[0]+25,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][2]),coord[0]+50,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][3]),coord[0]+75,coord[1]+20)
}

//if its unowned
else if(gameBoard[x][y][0]==0){

//make space gray
ctx.fillStyle="#3F3F3F"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])
}

//commerce
ctx.font="30px Georgia"
var redAmount=String(Math.floor(Number(255*gameBoard[x][y][3])))
var blueAmount=String(Math.floor(Number(255*(1-gameBoard[x][y][3]))))
ctx.fillStyle="rgba("+redAmount+",255,"+blueAmount+",0.5)"
ctx.fillText(String(gameBoard[x][y][2]),coord[0]+2,coord[1]+90)

//upkeep
ctx.font="30px Georgia"
ctx.fillStyle="#7FFF7F"
ctx.fillText(String(gameBoard[x][y][8]),coord[0]+80,coord[1]+90)

//grid
ctx.strokeStyle="#000000"
ctx.strokeRect(coord[0],coord[1],coord[2],coord[3])

if(selected[0]==x && selected[1]==y){
var grd=ctx.createRadialGradient(50+coord[0],50+coord[1],10,50+coord[0],50+coord[1],50);
grd.addColorStop(0,"yellow");
grd.addColorStop(1,"rgba(0,0,0,0)");
ctx.fillStyle=grd

ctx.fillRect(coord[0],coord[1],coord[2],coord[3])
delete grd
}
//setTimeout(Draw(),50)
}
}
}
</script>
</head>
<body>
<canvas width="500px" height="500px" id="workspace" onclick="Clicky(event)">You should get Nightly!</canvas>
<!--
<br>
<button onclick="changeWidth(Number(document.getElementById('widthAmount').value))">Change Width</button><input type="text" id="widthAmount">Number of squares</input>
<br>
<button onclick="changeHeight(Number(document.getElementById('heightAmount').value))">Change Height</button><input type="text" id="heightAmount">Number of squares</input>
-->
<br>
<div>
<table>
<tr>
<th>
Controller
</th>
<th>
Current
</th>
<th>
Commerce
</th>
<th>
Commerce Spread
</th>
<th>
Production Focus
</th>
<th>
Build Progress
</th>
<th>
Production
</th>
<th>
Income
</th>
<th>
Upkeep
</th>
</tr>
<tr>
<td>
<select id="selectedOwner" onclick="gameBoard[selected[0]][selected[1]][0]=document.getElementById('selectedOwner').value;Draw();">
  <option value=0>Unowned</option>
  <option value=1>Blue</option>
  <option value=2>Red</option>
</select>
</td>
<td>
<input type="text" id="selectedSmallCraft">Small Craft</input><br>
<input type="text" id="selectedFrigates">Frigates</input><br>
<input type="text" id="selectedCruisers">Cruisers</input><br>
<input type="text" id="selectedBattleships">Battleships</input><br>
<button onclick="gameBoard[selected[0]][selected[1]][1]=[Number(document.getElementById('selectedSmallCraft').value),Number(document.getElementById('selectedFrigates').value),Number(document.getElementById('selectedCruisers').value),Number(document.getElementById('selectedBattleships').value)];Draw();">Set</button>
</td>
<td>
<input type="text" id="selectedCommerce"></input><br>
<button onclick="gameBoard[selected[0]][selected[1]][2]=Number(document.getElementById('selectedCommerce').value);document.getElementById('selectedIncome').value=document.getElementById('selectedSpreadOutput').value*document.getElementById('selectedCommerce').value;document.getElementById('selectedProduction').value=(1-document.getElementById('selectedSpreadOutput').value)*document.getElementById('selectedCommerce').value;Draw();">Set</button>
</td>
<td>
<span>Income<input type="range" min="0" max="1" step=0.01 onchange="document.getElementById('selectedSpreadOutput').value=String(document.getElementById('selectedSpreadSlider').value)" id="selectedSpreadSlider">Production</span>
<br>
<input type="text" id="selectedSpreadOutput"></input><br>
<button onclick="gameBoard[selected[0]][selected[1]][3]=Number(document.getElementById('selectedSpreadOutput').value);Draw();document.getElementById('selectedIncome').value=(1-document.getElementById('selectedSpreadOutput').value)*document.getElementById('selectedCommerce').value;document.getElementById('selectedProduction').value=document.getElementById('selectedSpreadOutput').value*document.getElementById('selectedCommerce').value;">Set</button>
</td>
<td>
<select id="selectedProductionFocus" onclick="gameBoard[selected[0]][selected[1]][4]=document.getElementById('selectedProductionFocus').value;Draw();">
  <option value=0>Small Craft</option>
  <option value=1>Frigates</option>
  <option value=2>Cruisers</option>
  <option value=3>Battleships</option>
</td>
<td>
<input type="text" id="selectedProgressSmallCraft">Small Craft</input><br>
<input type="text" id="selectedProgressFrigates">Frigates</input><br>
<input type="text" id="selectedProgressCruisers">Cruisers</input><br>
<input type="text" id="selectedProgressBattleships">Battleships</input><br>
<button onclick="gameBoard[selected[0]][selected[1]][5]=[Number(document.getElementById('selectedProgressSmallCraft').value),Number(document.getElementById('selectedProgressFrigates').value),Number(document.getElementById('selectedProgressCruisers').value),Number(document.getElementById('selectedProgressBattleships').value);Draw();">Set</button>
</td>
<td>
<input type="text" id="selectedProduction" readonly onchange="gameBoard[selected[0]][selected[1]][6]=document.getElementById('selectedProduction').value;document.getElementById('selectedProductionSpreadSmallCraftSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadFrigatesSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadCruisersSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadBattleshipsSlider').max=String(document.getElementById('selectedProduction').value);"></input>
</td>
<td>
<input type="text" id="selectedIncome" onchange="gameBoard[selected[0]][selected[1]][7]=document.getElementById('selectedIncome').value" readonly></input>
</td>
<td>
<input type="text" id="selectedUpkeep" onchange="gameBoard[selected[0]][selected[1]][8]=document.getElementById('selectedUpkeep').value;Draw();"></input>
</td>
</tr>
</table>
<input type="text" id="output"></input>
<button onclick="document.getElementById('output').value=JSON.stringify(gameBoard)">Generate</button>
</div>
<script>
var workspace=document.getElementById('workspace')
var ctx=workspace.getContext('2d')
changeWidth(5);
Draw();
</script>
</body>
