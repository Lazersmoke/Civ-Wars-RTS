<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="mainstyle.css">
<script>
var selected=[0,0]
//parsecs=[Owner,current:[small craft,frigates,cruisers,battleships],commerce,commerce spread:0=full income 1=full production,production spread of:[small craft,frigates,cruisers,battleships](totals to production amount),progress on:[small craft,frigates,cruisers,battleships],production,income,upkeep]
var gameBoard=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]

function changeWidth(amount){
amount=Math.floor(amount)
for(var x=0;x<amount;x++){
for(var y=0;y<gameBoard.length;y++){
gameBoard[y].push([0,[0,0,0,0],0,0.5,[0.25,0.25,0.25,0.25],[0,0,0,0],0,0,0])
}
}
//workspace.width+=amount*100
Draw();
}
function changeHeight(amount){
amount=Math.floor(amount)
var addition=[]
for(var x=0;x<gameBoard[0].length;x++){
addition.push([0,[0,0,0,0],0,0.5,[0,0,0,0],[0,0,0,0],0,0,0])
}
for(var x=0;x<amount;x++){
gameBoard.push(addition)
}
workspace.height+=amount*100
Draw();
}
function Clicky(e){
var clix=e.clientX-9
var cliy=e.clientY-9
selected[0]=Math.floor(clix/100)
selected[1]=Math.floor(cliy/100)
document.getElementById('selectedOwner').value=gameBoard[selected[0]][selected[1]][0]
document.getElementById('selectedSmallCraft').value=gameBoard[selected[0]][selected[1]][1][0]
document.getElementById('selectedFrigates').value=gameBoard[selected[0]][selected[1]][1][1]
document.getElementById('selectedCruisers').value=gameBoard[selected[0]][selected[1]][1][2]
document.getElementById('selectedBattleships').value=gameBoard[selected[0]][selected[1]][1][3]
document.getElementById('selectedCommerce').value=gameBoard[selected[0]][selected[1]][2]
document.getElementById('selectedSpreadOutput').value=gameBoard[selected[0]][selected[1]][3]
document.getElementById('selectedSpreadSlider').value=gameBoard[selected[0]][selected[1]][3]
document.getElementById('selectedProductionSpreadSmallCraftOutput').value=gameBoard[selected[0]][selected[1]][4][0]
document.getElementById('selectedProductionSpreadSmallCraftSlider').value=gameBoard[selected[0]][selected[1]][4][0]
document.getElementById('selectedProductionSpreadFrigatesOutput').value=gameBoard[selected[0]][selected[1]][4][1]
document.getElementById('selectedProductionSpreadFrigatesSlider').value=gameBoard[selected[0]][selected[1]][4][1]
document.getElementById('selectedProductionSpreadCruisersOutput').value=gameBoard[selected[0]][selected[1]][4][2]
document.getElementById('selectedProductionSpreadCruisersSlider').value=gameBoard[selected[0]][selected[1]][4][2]
document.getElementById('selectedProductionSpreadBattleshipsOutput').value=gameBoard[selected[0]][selected[1]][4][3]
document.getElementById('selectedProductionSpreadBattleshipsSlider').value=gameBoard[selected[0]][selected[1]][4][3]
document.getElementById('selectedProgressSmallCraft').value=gameBoard[selected[0]][selected[1]][5][0]
document.getElementById('selectedProgressFrigates').value=gameBoard[selected[0]][selected[1]][5][1]
document.getElementById('selectedProgressCruisers').value=gameBoard[selected[0]][selected[1]][5][2]
document.getElementById('selectedProgressBattleships').value=gameBoard[selected[0]][selected[1]][5][3]
document.getElementById('selectedProduction').value=gameBoard[selected[0]][selected[1]][6]
document.getElementById('selectedIncome').value=gameBoard[selected[0]][selected[1]][7]
document.getElementById('selectedProductionSpreadSmallCraftSlider').max=String(document.getElementById('selectedProduction').value);
document.getElementById('selectedProductionSpreadFrigatesSlider').max=String(document.getElementById('selectedProduction').value);
document.getElementById('selectedProductionSpreadCruisersSlider').max=String(document.getElementById('selectedProduction').value);
document.getElementById('selectedProductionSpreadBattleshipsSlider').max=String(document.getElementById('selectedProduction').value);
Draw();
}
function adjustProductionSpread(myOwnID){
var otherIDs=['selectedProductionSpreadSmallCraftSlider','selectedProductionSpreadFrigatesSlider','selectedProductionSpreadCruisersSlider','selectedProductionSpreadBattleshipsSlider']
myOwnID=otherIDs.splice(otherIDs.indexOf(myOwnID),1)
var sliderA=document.getElementById(otherIDs[0])
var sliderB=document.getElementById(otherIDs[1])
var sliderC=document.getElementById(otherIDs[2])
var sliderSelf=document.getElementById(myOwnID)
var totalValue=
sliderA.value+
sliderB.value+
sliderC.value+
sliderSelf.value;
var totalProduction=document.getElementById('selectedProduction').value;

if(totalValue>totalProduction){
var diff=totalValue-totalProduction
sliderA.value-=diff/3
sliderB.value-=diff/3
sliderC.value-=diff/3
}
else if(totalValue<totalProduction){
var diff=totalProduction-totalValue
sliderA.value+=diff/3
sliderB.value+=diff/3
sliderC.value+=diff/3
}
document.getElementById('selectedProductionSpreadSmallCraftOutput').value=document.getElementById('selectedProductionSpreadSmallCraftSlider').value;
document.getElementById('selectedProductionSpreadFrigatesOutput').value=document.getElementById('selectedProductionSpreadFrigatesSlider').value;
document.getElementById('selectedProductionSpreadCruisersOutput').value=document.getElementById('selectedProductionSpreadCruisersSlider').value;
document.getElementById('selectedProductionSpreadBattleshipsOutput').value=document.getElementById('selectedProductionSpreadBattleshipsSlider').value;
//if(totalValue!=totalCommerce){adjustProductionSpread();}
}
function Draw(){
workspace.width=workspace.width
for(var x=0;x<workspace.width/100;x++){
for(var y=0;y<workspace.height/100;y++){

var coord=[(x*100),(y*100),((x+1)*100),((y+1)*100)]

//if its blue
if(gameBoard[x][y][0]==1){

//make space blue
ctx.fillStyle="#00007F"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])

//and put a blue numbers for current strength
ctx.font="30px Georgia"
ctx.fillStyle="#0000FF"
ctx.fillText(String(gameBoard[x][y][1][0]),coord[0],coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][1]),coord[0]+25,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][2]),coord[0]+50,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][3]),coord[0]+75,coord[1]+20)
}
//if its red
else if(gameBoard[x][y][0]==2){

//make space red
ctx.fillStyle="#7F0000"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])

//and put a red numbers for current strength
ctx.font="30px Georgia"
ctx.fillStyle="#FF0000"
ctx.fillText(String(gameBoard[x][y][1][0]),coord[0],coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][1]),coord[0]+25,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][2]),coord[0]+50,coord[1]+20)
ctx.fillText(String(gameBoard[x][y][1][3]),coord[0]+75,coord[1]+20)
}

//if its unowned
else if(gameBoard[x][y][0]==0){

//make space gray
ctx.fillStyle="#3F3F3F"
ctx.fillRect(coord[0],coord[1],coord[2],coord[3])
}

//commerce
ctx.font="30px Georgia"
ctx.fillStyle="#007F00"
ctx.fillText(String(gameBoard[x][y][2]),coord[0]+2,coord[1]+90)
//commerce spread
var redAmount=String(Math.floor(Number(255*gameBoard[x][y][3])))
var blueAmount=String(Math.floor(Number(255*(1-gameBoard[x][y][3]))))
ctx.fillStyle="rgba("+redAmount+",0,"+blueAmount+",0.5)"
ctx.fillRect(coord[0],coord[1]+60,coord[0]+20,coord[1]+100)

//build spread
//build progress
/*
ctx.beginPath();
ctx.arc(coord[0]+80,coord[1]+20,20,0,2*(gameBoard[x][y][3])*Math.PI,false)
ctx.lineTo(coord[0]+80,coord[1]+20)
ctx.lineTo(coord[0]+100,coord[1]+20)
ctx.fill();
*/
ctx.strokeStyle="#000000"
ctx.strokeRect(coord[0],coord[1],coord[2],coord[3])

if(selected[0]==x && selected[1]==y){
var grd=ctx.createRadialGradient(50+coord[0],50+coord[1],10,50+coord[0],50+coord[1],50);
grd.addColorStop(0,"yellow");
grd.addColorStop(1,"rgba(0,0,0,0)");
ctx.fillStyle=grd

ctx.fillRect(coord[0],coord[1],coord[2],coord[3])
delete grd
}
//setTimeout(Draw(),50)
}
}
}
</script>
</head>
<body>
<canvas width="2500px" height="2500px" id="workspace" onclick="Clicky(event)">You should get Nightly!</canvas>
<!--
<br>
<button onclick="changeWidth(Number(document.getElementById('widthAmount').value))">Change Width</button><input type="text" id="widthAmount">Number of squares</input>
<br>
<button onclick="changeHeight(Number(document.getElementById('heightAmount').value))">Change Height</button><input type="text" id="heightAmount">Number of squares</input>
-->
<br>
<div style="position:abosolute;top:9px;right:9px;">
<table>
<tr>
<th>
Controller
</th>
<th>
Current
</th>
<th>
Commerce
</th>
<th>
Commerce Spread
</th>
<th>
Production Spread
</th>
<th>
Build Progress
</th>
<th>
Production
</th>
<th>
Income
</th>
</tr>
<tr>
<td>
<select id="selectedOwner" onclick="gameBoard[selected[1]][selected[0]][0]=document.getElementById('selectedOwner').value;Draw();">
  <option value=0>Unowned</option>
  <option value=1>Blue</option>
  <option value=2>Red</option>
</select>
</td>
<td>
<input type="text" id="selectedSmallCraft">Small Craft</input><br>
<input type="text" id="selectedFrigates">Frigates</input><br>
<input type="text" id="selectedCruisers">Cruisers</input><br>
<input type="text" id="selectedBattleships">Battleships</input><br>
<button onclick="gameBoard[selected[0]][selected[1]][1]=[Number(document.getElementById('selectedSmallCraft').value),Number(document.getElementById('selectedFrigates').value),Number(document.getElementById('selectedCruisers').value),Number(document.getElementById('selectedBattleships').value)];Draw();">Set</button>
</td>
<td>
<input type="text" id="selectedCommerce"></input><br>
<button onclick="gameBoard[selected[0]][selected[1]][2]=Number(document.getElementById('selectedCommerce').value);document.getElementById('selectedIncome').value=document.getElementById('selectedSpreadOutput').value*document.getElementById('selectedCommerce').value;document.getElementById('selectedProduction').value=(1-document.getElementById('selectedSpreadOutput').value)*document.getElementById('selectedCommerce').value;document.getElementById('selectedProductionSpreadSmallCraftSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadFrigatesSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadCruisersSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadBattleshipsSlider').max=String(document.getElementById('selectedProduction').value);Draw();">Set</button>
</td>
<td>
<span>Income<input type="range" min="0" max="1" step=0.01 onchange="document.getElementById('selectedSpreadOutput').value=String(document.getElementById('selectedSpreadSlider').value)" id="selectedSpreadSlider">Production</span>
<br>
<input type="text" id="selectedSpreadOutput"></input><br>
<button onclick="gameBoard[selected[0]][selected[1]][3]=Number(document.getElementById('selectedSpreadOutput').value);Draw();document.getElementById('selectedIncome').value=(1-document.getElementById('selectedSpreadOutput').value)*document.getElementById('selectedCommerce').value;document.getElementById('selectedProduction').value=document.getElementById('selectedSpreadOutput').value*document.getElementById('selectedCommerce').value;document.getElementById('selectedProductionSpreadSmallCraftSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadFrigatesSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadCruisersSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadBattleshipsSlider').max=String(document.getElementById('selectedProduction').value);">Set</button>
</td>
<td>
<input type="range" min="0" max="0" step=0.01 onchange="adjustProductionSpread('selectedProductionSpreadSmallCraftSlider');document.getElementById('selectedProductionSpreadSmallCraftOutput').value=document.getElementById('selectedProductionSpreadSmallCraftSlider').value" id="selectedProductionSpreadSmallCraftSlider"></input><input type="text" id="selectedProductionSpreadSmallCraftOutput"></input>Small Craft<br>
<input type="range" min="0" max="0" step=0.01 onchange="adjustProductionSpread('selectedProductionSpreadFrigatesSlider');document.getElementById('selectedProductionSpreadFrigatesOutput').value=document.getElementById('selectedProductionSpreadFrigatesSlider').value" id="selectedProductionSpreadFrigatesSlider"></input><input type="text" id="selectedProductionSpreadFrigatesOutput"></input>Frigates<br>
<input type="range" min="0" max="0" step=0.01 onchange="adjustProductionSpread('selectedProductionSpreadCruisersSlider');document.getElementById('selectedProductionSpreadCruisersOutput').value=document.getElementById('selectedProductionSpreadCruisersSlider').value" id="selectedProductionSpreadCruisersSlider"></input><input type="text" id="selectedProductionSpreadCruisersOutput"></input>Cruisers<br>
<input type="range" min="0" max="0" step=0.01 onchange="adjustProductionSpread('selectedProductionSpreadBattleshipsSlider');document.getElementById('selectedProductionSpreadBattleshipsOutput').value=document.getElementById('selectedProductionSpreadBattleshipsSlider').value" id="selectedProductionSpreadBattleshipsSlider"></input><input type="text" id="selectedProductionSpreadBattleshipsOutput"></input>Battleships<br>

</td>
<td>
<input type="text" id="selectedProgressSmallCraft">Small Craft</input><br>
<input type="text" id="selectedProgressFrigates">Frigates</input><br>
<input type="text" id="selectedProgressCruisers">Cruisers</input><br>
<input type="text" id="selectedProgressBattleships">Battleships</input><br>
<button onclick="gameBoard[selected[0]][selected[1]][5]=[Number(document.getElementById('selectedProgressSmallCraft').value),Number(document.getElementById('selectedProgressFrigates').value),Number(document.getElementById('selectedProgressCruisers').value),Number(document.getElementById('selectedProgressBattleships').value);Draw();">Set</button>
</td>
<td>
<input type="text" id="selectedProduction" onchange="gameBoard[selected[0]][selected[1]][6]=document.getElementById('selectedProduction').value;document.getElementById('selectedProductionSpreadSmallCraftSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadFrigatesSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadCruisersSlider').max=String(document.getElementById('selectedProduction').value);document.getElementById('selectedProductionSpreadBattleshipsSlider').max=String(document.getElementById('selectedProduction').value);"></input>
</td>
<td>
<input type="text" id="selectedIncome" onchange="gameBoard[selected[0]][selected[1]][7]=document.getElementById('selectedIncome').value">
</td>
</tr>
</table>
<input type="text" id="output"></input>
<button onclick="document.getElementById('output').value='['+String(gameBoard)+']'">Generate</button>
</div>
<script>
var workspace=document.getElementById('workspace')
var ctx=workspace.getContext('2d')
changeWidth(25);
Draw();
</script>
</body>
